#!/usr/bin/env sh

ARGS=("$@")
OS=$(uname)
EMAIL=${ARGS[0]}
CONTENT_FMT='%(playlist)s/%(chapter_number)s. %(chapter)s/%(playlist_index)s. %(title)s.%(ext)s'
CONTENT_DIR="$HOME/pluralsight/videos/" # You want to keep the trailing slash on the end.

[[ ! -d $CONTENT_DIR ]] && mkdir -p $CONTENT_DIR

read -s -p "Password: " PASSWORD
echo ""
read -s -p "Course URL: " COURSE_URL

youtube-dl \
    --username $EMAIL \
    --password $PASSWORD \
    $COURSE_URL \
    -o "${CONTENT_DIR}${CONTENT_FMT}" \
    --sleep-interval 10

unset HISTFILE && exit
